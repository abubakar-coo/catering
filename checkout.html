<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Checkout - Once Upon a Wedding</title>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/all.min.css">
    <link rel="stylesheet" type="text/css" href="css/flaticon_prentup.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.css">
    <link rel="stylesheet" type="text/css" href="css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="css/aos.css">
    <link rel="stylesheet" type="text/css" href="css/slick.css">
    <link rel="stylesheet" type="text/css" href="css/prettyPhoto.css">
    <link rel="stylesheet" type="text/css" href="css/shortcodes.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/megamenu.css">
    <link rel="stylesheet" type="text/css" href="css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Custom Styles -->
    <style>
        /* Professional Checkout Page Styling */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
        }
        
        .checkout-header {
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
            color: white;
            padding: 80px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .checkout-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .checkout-header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .checkout-header p {
            font-size: 1.3rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .checkout-container {
            background: transparent;
            padding: 60px 0;
            min-height: 80vh;
        }
        
        .order-summary {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .order-summary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
        }
        
        .checkout-form {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .checkout-form::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            display: block;
        }
        
        .form-control {
            width: 100%;
            padding: 18px 25px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            position: relative;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #fa3131;
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(250, 49, 49, 0.2);
            background: rgba(255,255,255,1);
        }
        
        .form-control:hover {
            border-color: #fa3131;
            box-shadow: 0 8px 25px rgba(250, 49, 49, 0.15);
        }
        
        /* Modern Form Styling */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-control {
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: #fff;
        }
        
        .form-control:hover {
            border-color: #fa3131;
            box-shadow: 0 5px 15px rgba(250, 49, 49, 0.1);
        }
        
        .form-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Professional Button Styles */
        .btn-checkout {
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
            color: white;
            border: none;
            padding: 20px 60px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 15px 35px rgba(250, 49, 49, 0.4);
            position: relative;
            overflow: hidden;
            width: 100%;
            margin-top: 30px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-checkout::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-checkout:hover::before {
            left: 100%;
        }
        
        .btn-checkout:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 25px 50px rgba(250, 49, 49, 0.6);
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
        }
        
        .btn-checkout:active {
            transform: translateY(-2px) scale(0.98);
        }
        
        .btn-checkout:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Payment Method Cards */
        .payment-method-card {
            border: 2px solid #e9ecef;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            position: relative;
            overflow: hidden;
        }
        
        .payment-method-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .payment-method-card:hover {
            border-color: #fa3131;
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(250, 49, 49, 0.2);
        }
        
        .payment-method-card:hover::before {
            transform: scaleX(1);
        }
        
        .payment-method-card.selected {
            border-color: #fa3131;
            background: linear-gradient(135deg, #fff5f5 0%, #ffe8e8 100%);
            box-shadow: 0 15px 35px rgba(250, 49, 49, 0.3);
        }
        
        .payment-method-card.selected::before {
            transform: scaleX(1);
        }
        
        /* Loading Animation */
        .btn-loading {
            position: relative;
            color: transparent !important;
        }
        
        .btn-loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .checkout-container {
                padding: 30px 0;
            }
            
            .checkout-form {
                padding: 30px;
            }
        }
        
        @media (max-width: 992px) {
            .checkout-header h1 {
                font-size: 2rem !important;
            }
            
            .checkout-header p {
                font-size: 1rem !important;
            }
            
            .order-summary {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .checkout-form {
                padding: 25px;
            }
            
            .payment-methods {
                flex-direction: column;
                gap: 15px;
            }
            
            .payment-method {
                padding: 15px;
            }
        }
        
        @media (max-width: 768px) {
            body {
                zoom: 1;
            }
            
            .checkout-header {
                padding: 40px 0;
            }
            
            .checkout-header h1 {
                font-size: 1.8rem !important;
            }
            
            .checkout-container {
                padding: 20px 0;
            }
            
            .checkout-form {
                padding: 20px;
                margin: 0 10px;
            }
            
            .order-summary {
                padding: 15px;
                margin: 0 10px 20px 10px;
            }
            
            .form-control {
                font-size: 16px; /* Prevents zoom on mobile */
            }
            
            .btn-checkout, .btn-back {
                padding: 12px 20px;
                font-size: 16px;
            }
            
            .payment-details {
                padding: 15px !important;
            }
        }
        
        @media (max-width: 576px) {
            .checkout-header h1 {
                font-size: 1.5rem !important;
            }
            
            .checkout-form {
                padding: 15px;
                margin: 0 5px;
            }
            
            .order-summary {
                padding: 15px;
                margin: 0 5px 15px 5px;
            }
            
            .payment-method h5 {
                font-size: 1rem;
            }
            
            .payment-method p {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 400px) {
            .checkout-header h1 {
                font-size: 1.3rem !important;
            }
            
            .checkout-form {
                padding: 10px;
                margin: 0 2px;
            }
            
            .order-summary {
                padding: 10px;
                margin: 0 2px 10px 2px;
            }
        }
        
        .payment-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .payment-methods {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .payment-method {
            flex: 1;
            text-align: center;
            padding: 8px 4px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-method:hover {
            border-color: #fa3131;
            background: #fff5f5;
        }
        
        .payment-method.selected {
            border-color: #fa3131;
            background: #fff5f5;
        }
        
        .btn-checkout {
            background: #fa3131;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 30px;
        }
        
        .btn-checkout:hover {
            background: #e02828;
            transform: translateY(-2px);
        }
        
        .btn-back {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 15px;
        }
        
        .btn-back:hover {
            background: #5a6268;
        }
        
        .ticket-info {
            background: #fff5f5;
            border-left: 4px solid #fa3131;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 0 10px 10px 0;
        }
        
        .price-breakdown {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .total-row {
            border-top: 2px solid #ddd;
            padding-top: 15px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .savings {
            color: #28a745;
            font-weight: bold;
        }
        
        /* DOB Input Styles */
        .dob-manual-input {
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }
        
        .dob-manual-input .form-control {
            border-radius: 4px;
            border: 1px solid #ced4da;
            transition: all 0.3s ease;
            text-align: center;
            padding: 6px 8px;
            font-size: 14px;
        }
        
        .dob-manual-input .form-control:focus {
            border-color: #fa3131;
            box-shadow: 0 0 0 0.2rem rgba(250, 49, 49, 0.25);
        }
        
        .dob-manual-input .form-text {
            text-align: center;
            font-size: 10px;
            margin-top: 3px;
        }
        
        /* Activity Section Styles */
        .activity-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #dee2e6;
            position: relative;
            overflow: hidden;
        }
        
        .activity-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #202020ff 0%, #fa3131 100%);;
        }
        
        .activity-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .activity-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin: 0;
        }
        
        .activity-label input[type="radio"] {
            margin-right: 6px;
            transform: scale(1.0);
        }
        
        .activity-option {
            padding: 6px 12px;
            border-radius: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            font-size: 14px;
        }
        
        .yes-option {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .no-option {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
        }
        
        .activity-label input[type="radio"]:checked + .yes-option {
            background: linear-gradient(135deg, #1e7e34 0%, #17a2b8 100%);
            border-color: #155724;
            transform: scale(1.05);
        }
        
        .activity-label input[type="radio"]:checked + .no-option {
            background: linear-gradient(135deg, #495057 0%, #343a40 100%);
            border-color: #212529;
            transform: scale(1.05);
        }
        
        .activity-options {
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }
        
        .activity-title {
            color: #fa3131;
            font-weight: bold;
            margin-bottom: 8px;
            text-align: center;
            font-size: 14px;
        }
        
        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .activity-checkbox {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        
        .activity-checkbox:hover {
            background: #f8f9fa;
            border-color: #fa3131;
        }
        
        .activity-checkbox input[type="checkbox"] {
            margin-right: 6px;
            transform: scale(0.9);
        }
        
        .activity-checkbox input[type="checkbox"]:checked + .activity-item {
            color: #fa3131;
            font-weight: bold;
        }
        
        .activity-checkbox input[type="checkbox"]:checked {
            accent-color: #fa3131;
        }
        
        .activity-checkbox input[type="checkbox"]:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .activity-checkbox:has(input[type="checkbox"]:disabled) {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .activity-item {
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .activity-description {
            margin-top: 10px;
        }
        
        .activity-description label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 4px;
            display: block;
            font-size: 13px;
        }
        
        .activity-description textarea {
            border-radius: 6px;
            border: 1px solid #ced4da;
            transition: all 0.3s ease;
            padding: 6px;
            font-size: 13px;
        }
        
        .activity-description textarea:focus {
            border-color: #fa3131;
            box-shadow: 0 0 0 0.2rem rgba(250, 49, 49, 0.25);
        }
        
        @media (max-width: 768px) {
            .payment-methods {
                flex-direction: column;
            }
            
            .checkout-form {
                padding: 20px;
            }
            
            .dob-manual-input .row {
                gap: 10px;
            }
            
            .dob-manual-input .col-4 {
                flex: 1;
                min-width: 0;
            }
            
            .activity-toggle {
                flex-direction: column;
                gap: 6px;
            }
            
            .activity-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 6px;
            }
            
            .activity-option {
                padding: 4px 8px;
                font-size: 12px;
            }
        }
    </style>
</head>

<body>
    <!-- page start -->
    <div class="page">

        <!-- Checkout Header -->
        <div class="checkout-header">
            <div class="container">
                <h1 class="text-light" style="font-size: 2.5rem; margin-bottom: 10px; font-weight: bold;">
                    <i class="fa fa-credit-card" style="margin-right: 15px;"></i>Complete Your Purchase
                </h1>
                <p style="font-size: 1.1rem; margin-bottom: 0;">Fill in your details and confirm your ticket order</p>
            </div>
        </div>

        <!-- Checkout Container -->
        <div class="checkout-container">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Order Summary -->
                        <div class="order-summary">
                            <h3 style="margin-bottom: 25px; color: #333;">
                                <i class="fa fa-ticket-alt" style="margin-right: 10px; color: #fa3131;"></i>Order Summary
                            </h3>
                            <div id="ticketSummary">
                                <!-- Ticket summary will be populated here by JavaScript -->
                            </div>
                        </div>

                        <!-- Checkout Form -->
                        <div class="checkout-form">
                            <h3 style="margin-bottom: 30px; color: #333;">
                                <i class="fa fa-user" style="margin-right: 10px; color: #fa3131;"></i>Personal Information
                            </h3>
                            
                            <form id="checkoutForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="fullName">Full Name *</label>
                                            <input type="text" id="fullName" name="fullName" class="form-control" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="phone">Phone Number *</label>
                                            <input type="tel" id="phone" name="phone" class="form-control" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="email">Email Address *</label>
                                            <input type="email" id="email" name="email" class="form-control" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="emailConfirm">Re-enter Email Address *</label>
                                            <input type="email" id="emailConfirm" name="emailConfirm" class="form-control" required 
                                                   onpaste="return false;" oncopy="return false;" oncut="return false;"
                                                   placeholder="Type your email again (no copy-paste allowed)">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="dob">Date of Birth *</label>
                                            <div class="dob-manual-input">
                                                <div class="row">
                                                    <div class="col-4 ps-3 pe-2">
                                                        <input type="number" id="dobDay" class="form-control" placeholder="DD" style="height:35px"
                                                               min="1" max="31" onchange="updateDOBFromManual()">
                                                        <small class="form-text text-muted">Day</small>
                                                    </div>
                                                    <div class="col-4 px-3">
                                                        <select id="dobMonth" class="form-control" onchange="updateDOBFromManual()" style="height:35px">
                                                            <option value="">MM</option>
                                                            <option value="01">Jan</option><option value="02">Feb</option><option value="03">Mar</option>
                                                            <option value="04">Apr</option><option value="05">May</option><option value="06">Jun</option>
                                                            <option value="07">Jul</option><option value="08">Aug</option><option value="09">Sep</option>
                                                            <option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>
                                                        </select>
                                                        <small class="form-text text-muted">Month</small>
                                                    </div>
                                                    <div class="col-4 pe-3 ps-2">
                                                        <input type="number" id="dobYear" class="form-control" placeholder="YYYY" style="height:35px"  
                                                               min="1900" max="2010" onchange="updateDOBFromManual()">
                                                        <small class="form-text text-muted">Year</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <input type="hidden" id="dob" name="dob" required>
                                            <small class="form-text text-muted">
                                                <i class="fas fa-info-circle me-1"></i>Minimum age: 15 years
                                            </small>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="form-group">
                                            <label for="address">Address *</label>
                                            <textarea id="address" name="address" class="form-control" rows="3" required></textarea>
                                        </div>
                                    </div>
                                    
                                    <!-- VIP Features Section for Simple Ticket Holders -->
                                    <div class="col-md-12" id="vipFeaturesSection" style="display: none;">
                                        <div class="form-group">
                                            <div class="vip-features-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                                                <div class="text-center mb-3">
                                                    <i class="fa fa-crown" style="font-size: 30px; margin-bottom: 10px;"></i>
                                                    <h4 style="margin: 0; font-weight: bold;">VIP Exclusive Features</h4>
                                                    <p style="margin: 5px 0 0 0; opacity: 0.9;">Upgrade to VIP to unlock these amazing features!</p>
                                                </div>
                                                
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="feature-item" style="display: flex; align-items: center; margin-bottom: 15px;">
                                                            <i class="fa fa-star" style="color: #ffd700; margin-right: 10px; font-size: 18px;"></i>
                                                            <span><strong>Event Participation</strong> - Join activities on stage</span>
                                                        </div>
                                                        <div class="feature-item" style="display: flex; align-items: center; margin-bottom: 15px;">
                                                            <i class="fa fa-microphone" style="color: #ffd700; margin-right: 10px; font-size: 18px;"></i>
                                                            <span><strong>Singing & Comedy</strong> - Perform for the audience</span>
                                                        </div>
                                                        <div class="feature-item" style="display: flex; align-items: center; margin-bottom: 15px;">
                                                            <i class="fa fa-music" style="color: #ffd700; margin-right: 10px; font-size: 18px;"></i>
                                                            <span><strong>Dancing & Music</strong> - Show your talent</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="feature-item" style="display: flex; align-items: center; margin-bottom: 15px;">
                                                            <i class="fa fa-theater-masks" style="color: #ffd700; margin-right: 10px; font-size: 18px;"></i>
                                                            <span><strong>Drama & Poetry</strong> - Express yourself</span>
                                                        </div>
                                                        <div class="feature-item" style="display: flex; align-items: center; margin-bottom: 15px;">
                                                            <i class="fa fa-gem" style="color: #ffd700; margin-right: 10px; font-size: 18px;"></i>
                                                            <span><strong>Premium Experience</strong> - VIP treatment</span>
                                                        </div>
                                                        <div class="feature-item" style="display: flex; align-items: center; margin-bottom: 15px;">
                                                            <i class="fa fa-trophy" style="color: #ffd700; margin-right: 10px; font-size: 18px;"></i>
                                                            <span><strong>Special Recognition</strong> - Stand out from crowd</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="text-center mt-3">
                                                    <button onclick="upgradeToVIP()" style="background: #ffd700; color: #333; border: none; padding: 12px 30px; border-radius: 25px; font-weight: bold; cursor: pointer; font-size: 16px; box-shadow: 0 5px 15px rgba(255,215,0,0.3);">
                                                        <i class="fa fa-arrow-up" style="margin-right: 8px;"></i>Upgrade to VIP Now
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- User Activities Section - VIP Only -->
                                    <div class="col-md-12" id="participationSection">
                                        <div class="form-group">
                                            <label class="form-label">Event Participation *</label>
                                            <div class="vip-notice" id="vipNotice" style="background: #e3f2fd; border: 1px solid #90caf9; color: #1565c0; padding: 10px; border-radius: 5px; margin-bottom: 15px; display: none;">
                                                <i class="fa fa-crown" style="margin-right: 5px;"></i>
                                                <strong>VIP Only:</strong> Event participation is exclusively available for VIP ticket holders.
                                            </div>
                                            <div class="activity-section">
                                                <div class="activity-toggle">
                                                    <label class="activity-label">
                                                        <input type="radio" name="eventParticipation" value="yes" id="participationYes" onchange="toggleActivityOptions()">
                                                        <span class="activity-option yes-option">Yes, I want to participate in events</span>
                                                    </label>
                                                    <label class="activity-label">
                                                        <input type="radio" name="eventParticipation" value="no" id="participationNo" onchange="toggleActivityOptions()" checked>
                                                        <span class="activity-option no-option">No, I don't want to participate</span>
                                                    </label>
                                                </div>
                                                
                                                <div class="activity-options" id="activityOptions" style="display: none;">
                                                    <h6 class="activity-title">Select Your Interests:</h6>
                                                    <div class="activity-grid">
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="dancing" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Dancing</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="singing" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Singing</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="desi_events" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Desi Events</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="comedy" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Comedy</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="poetry" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Poetry</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="drama" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Drama</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="music" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Music</span>
                                                        </label>
                                                        <label class="activity-checkbox">
                                                            <input type="checkbox" name="activities" value="other" onchange="limitActivitySelection()">
                                                            <span class="activity-item">Other</span>
                                                        </label>
                                                    </div>
                                                    <div id="activityFeedback" class="text-muted small text-center mt-2">
                                                        <i class="fas fa-info-circle me-1"></i>Select up to 2 activities
                                                    </div>
                                                    
                                                    <div class="activity-description">
                                                        <label for="activityDescription">Tell us about yourself (Optional):</label>
                                                        <textarea id="activityDescription" name="activityDescription" class="form-control" rows="3" 
                                                                placeholder="Briefly describe your talent, experience, or what you'd like to showcase..."></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="requirements">Special Requirements (Optional)</label>
                                            <textarea id="requirements" name="requirements" class="form-control" rows="3" placeholder="Any special dietary requirements or accessibility needs"></textarea>
                                        </div>
                                    </div>
                                </div>

                                <!-- Payment Section -->
                                <div class="payment-section">
                                    <h5 style="margin-bottom: 20px; color: #333;">
                                        <i class="fa fa-credit-card" style="margin-right: 10px; color: #fa3131;"></i>Payment Method
                                    </h5>
                                    <p style="color: #666; margin-bottom: 20px;">Choose your preferred payment method. Click on any option below to view bank details and payment instructions.</p>
                                    
                                    <div class="payment-methods">
                                        <div class="payment-method" onclick="selectPaymentMethod('jsbank')" id="jsbank-payment">
                                            <i class="fa fa-university" style="font-size: 30px; color: #fa3131; margin-bottom: 10px;"></i>
                                            <h6 class="mb-0">JS Bank</h6>
                                            <p style="font-size: 13px; color: #666;margin-bottom:0 !important">Click to view details</p>
                                        </div>
                                        <div class="payment-method" onclick="selectPaymentMethod('mcb')" id="mcb-payment">
                                            <i class="fa fa-university" style="font-size: 30px; color: #fa3131; margin-bottom: 10px;"></i>
                                            <h6 class="mb-0">MCB</h6>
                                            <p style="font-size: 13px; color: #666;margin-bottom:0 !important">Click to view details</p>
                                        </div>
                                        <div class="payment-method" onclick="selectPaymentMethod('jazzcash')" id="jazzcash-payment">
                                            <i class="fa fa-wallet" style="font-size: 30px; color: #fa3131; margin-bottom: 10px;"></i>
                                            <h6 class="mb-0">JazzCash</h6>
                                            <p style="font-size: 13px; color: #666;margin-bottom:0 !important">Click to view details</p>
                                        </div>
                                    </div>
                                    
                                    <!-- No Selection Message -->
                                    <div id="noSelectionMessage" style="text-align: center; margin-top: 20px; padding: 20px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; color: #856404;">
                                        <i class="fa fa-hand-pointer" style="font-size: 24px; margin-bottom: 10px; color: #fa3131;"></i>
                                        <p style="margin: 0; font-weight: bold;">Please select a payment method above to view bank details</p>
                                    </div>
                                </div>

                                <!-- Payment Details Section -->
                                <div id="paymentDetails" class="payment-details" style="display: none; margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                                    <h4 style="margin-bottom: 20px; color: #333;">
                                        <i class="fa fa-info-circle" style="margin-right: 10px; color: #fa3131;"></i>Payment Information
                                    </h4>
                                    <div id="paymentInfo">
                                        <!-- Payment details will be populated here -->
                                    </div>
                                    
                                    <div class="payment-proof" style="margin-top: 20px;">
                                        <h5 style="margin-bottom: 15px; color: #333;">Payment Proof</h5>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="paymentSS">Payment Screenshot (SS) *</label>
                                                    <input type="file" id="paymentSS" name="paymentSS" class="form-control" accept="image/*" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="transactionId">Transaction ID (TID) *</label>
                                                    <input type="text" id="transactionId" name="transactionId" class="form-control" placeholder="Enter Transaction ID" required>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="text-align: center; margin-top: 30px;">
                                    <button type="button" onclick="goBack()" class="btn-back">
                                        <i class="fa fa-arrow-left" style="margin-right: 8px;"></i>Back to Tickets
                                    </button>
                                    <button type="submit" class="btn-checkout" id="submitBtn">
                                        <i class="fa fa-check" style="margin-right: 10px;"></i>Final Submit
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <!-- Order Summary Sidebar -->
                        <div class="order-summary">
                            <h4 style="margin-bottom: 20px; color: #333;">Order Details</h4>
                            <div id="orderDetails">
                                <!-- Order details will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <!-- page end -->

    <!-- Javascript -->
    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/jquery-migrate-3.4.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/Scrolltrigger.js"></script>
    <script src="js/SplitText.js"></script>
    <script src="js/cursor.js"></script>
    <script src="js/gsap.js"></script>
    <script src="js/gsap.min.js"></script>
    <script src="js/gsap-animation.js"></script>
    <script src="js/jquery-validate.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/jquery-waypoints.js"></script>
    <script src="js/numinate.min.js"></script>
    <script src="js/imagesloaded.min.js"></script>
    <script src="js/jquery-isotope.js"></script>
    <script src="js/circle-progress.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/aos.js"></script>
    <script>
        AOS.init({
            offset: 120,
            duration: 400,
        });
    </script>

    <!-- Checkout JavaScript -->
    <script>
        let selectedPaymentMethod = null;
        let ticketInfo = null;
        
        // Load ticket information on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadTicketInfo();
            loadOrderDetails();
            checkTicketTypeForParticipation();
        });
        
        // Check ticket type and show/hide participation section
        function checkTicketTypeForParticipation() {
            const ticketInfo = JSON.parse(localStorage.getItem('ticketInfo') || '{}');
            const participationSection = document.getElementById('participationSection');
            const vipFeaturesSection = document.getElementById('vipFeaturesSection');
            const vipNotice = document.getElementById('vipNotice');
            
            if (ticketInfo.type === 'simple') {
                // Hide participation section and show VIP features for Simple ticket holders
                participationSection.style.display = 'none';
                vipFeaturesSection.style.display = 'block';
            } else if (ticketInfo.type === 'vip') {
                // Show participation section and hide VIP features for VIP ticket holders
                participationSection.style.display = 'block';
                vipFeaturesSection.style.display = 'none';
                vipNotice.style.display = 'none';
            } else {
                // Default: hide both sections if no ticket info
                participationSection.style.display = 'none';
                vipFeaturesSection.style.display = 'none';
            }
        }
        
        function upgradeToVIP() {
            // Redirect to tickets page where user can edit their selection
            window.location.href = 'tickets.html';
        }
        
        function loadTicketInfo() {
            ticketInfo = JSON.parse(localStorage.getItem('ticketInfo') || '{}');
            
            if (!ticketInfo.type) {
                alert('No ticket information found. Please select tickets first.');
                window.location.href = 'index.html';
                return;
            }
            
            const typeName = ticketInfo.type === 'simple' ? 'Simple Ticket' : 'VIP Ticket';
            const savings = (ticketInfo.originalPrice - ticketInfo.pricePerTicket) * ticketInfo.quantity;
            
            document.getElementById('ticketSummary').innerHTML = `
                <div class="ticket-info">
                    <h5 style="margin-bottom: 15px; color: #333;">${typeName} x ${ticketInfo.quantity}</h5>
                    <div class="price-breakdown">
                        <div class="price-row">
                            <span>Price per ticket:</span>
                            <span>Rs. ${ticketInfo.pricePerTicket.toLocaleString()}</span>
                        </div>
                        <div class="price-row">
                            <span>Quantity:</span>
                            <span>${ticketInfo.quantity} ticket(s)</span>
                        </div>
                        <div class="price-row savings">
                            <span>You Save:</span>
                            <span>Rs. ${savings.toLocaleString()}</span>
                        </div>
                        <div class="price-row total-row">
                            <span>Total Amount:</span>
                            <span style="color: #fa3131;">Rs. ${ticketInfo.total.toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function loadOrderDetails() {
            if (!ticketInfo) return;
            
            const typeName = ticketInfo.type === 'simple' ? 'Simple Ticket' : 'VIP Ticket';
            
            document.getElementById('orderDetails').innerHTML = `
                <div style="border-bottom: 1px solid #ddd; padding-bottom: 15px; margin-bottom: 15px;">
                    <h5 style="color: #333; margin-bottom: 10px;">Event Details</h5>
                    <p style="margin: 5px 0; color: #666;"><strong>Event:</strong> Once Upon a Wedding</p>
                    <p style="margin: 5px 0; color: #666;"><strong>Date:</strong> December 20, 2025</p>
                    <p style="margin: 5px 0; color: #666;"><strong>Time:</strong> 6:00 PM - 12:00 AM</p>
                    <p style="margin: 5px 0; color: #666;"><strong>Location:</strong> Lahore</p>
                </div>
                
                <div style="border-bottom: 1px solid #ddd; padding-bottom: 15px; margin-bottom: 15px;">
                    <h5 style="color: #333; margin-bottom: 10px;">Ticket Details</h5>
                    <p style="margin: 5px 0; color: #666;"><strong>Type:</strong> ${typeName}</p>
                    <p style="margin: 5px 0; color: #666;"><strong>Quantity:</strong> ${ticketInfo.quantity}</p>
                    <p style="margin: 5px 0; color: #666;"><strong>Price:</strong> Rs. ${ticketInfo.pricePerTicket.toLocaleString()} each</p>
                </div>
                
                <div>
                    <h5 style="color: #333; margin-bottom: 10px;">Total</h5>
                    <p style="font-size: 18px; font-weight: bold; color: #fa3131;">Rs. ${ticketInfo.total.toLocaleString()}</p>
                </div>
            `;
        }
        
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Update visual selection
            document.querySelectorAll('.payment-method').forEach(payment => {
                payment.classList.remove('selected');
            });
            
            document.getElementById(method + '-payment').classList.add('selected');
            
            // Show payment details
            showPaymentDetails(method);
        }
        
        function showPaymentDetails(method) {
            const paymentDetails = document.getElementById('paymentDetails');
            const paymentInfo = document.getElementById('paymentInfo');
            
            const paymentMethods = {
                'jsbank': {
                    name: 'JS Bank',
                    details: `
                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #fa3131;">
                            <h5 style="color: #333; margin-bottom: 15px;">JS Bank Details</h5>
                            <p style="margin: 8px 0;"><strong>Account Title:</strong> SOHAIB DILSHAD</p>
                            <p style="margin: 8px 0;"><strong>Account Number:</strong> 0002473593</p>
                            <p style="margin: 8px 0;"><strong>IBAN:</strong> PK42JSBL9122000002473593</p>
                            <p style="margin: 8px 0; color: #fa3131; font-weight: bold;"><strong>Amount:</strong> Rs. ${ticketInfo ? ticketInfo.total.toLocaleString() : '0'}</p>
                            <p style="margin: 8px 0; font-size: 14px; color: #666;">Please transfer the exact amount to this JS Bank account</p>
                        </div>
                    `
                },
                'mcb': {
                    name: 'MCB',
                    details: `
                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #fa3131;">
                            <h5 style="color: #333; margin-bottom: 15px;">MCB Details</h5>
                            <p style="margin: 8px 0;"><strong>Account Title:</strong> SOHAIB DILSHAD</p>
                            <p style="margin: 8px 0;"><strong>Account Number:</strong> 1221484941015444</p>
                            <p style="margin: 8px 0;"><strong>IBAN:</strong> PK53MUCB1221484941015444</p>
                            <p style="margin: 8px 0; color: #fa3131; font-weight: bold;"><strong>Amount:</strong> Rs. ${ticketInfo ? ticketInfo.total.toLocaleString() : '0'}</p>
                            <p style="margin: 8px 0; font-size: 14px; color: #666;">Please transfer the exact amount to this MCB account</p>
                        </div>
                    `
                },
                'jazzcash': {
                    name: 'JazzCash',
                    details: `
                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #fa3131;">
                            <h5 style="color: #333; margin-bottom: 15px;">JazzCash Details</h5>
                            <p style="margin: 8px 0;"><strong>Account Title:</strong> SOHAIB DILSHAD</p>
                            <p style="margin: 8px 0;"><strong>Account Number:</strong> 03224460129</p>
                            <p style="margin: 8px 0;"><strong>IBAN:</strong> PK22JCMA2602923224460129</p>
                            <p style="margin: 8px 0; color: #fa3131; font-weight: bold;"><strong>Amount:</strong> Rs. ${ticketInfo ? ticketInfo.total.toLocaleString() : '0'}</p>
                            <p style="margin: 8px 0; font-size: 14px; color: #666;">Send the exact amount to this JazzCash number</p>
                        </div>
                    `
                }
            };
            
            paymentInfo.innerHTML = paymentMethods[method].details;
            paymentDetails.style.display = 'block';
            
            // Hide the no selection message
            const noSelectionMessage = document.getElementById('noSelectionMessage');
            if (noSelectionMessage) {
                noSelectionMessage.style.display = 'none';
            }
        }
        
        function goBack() {
            window.location.href = 'index.html';
        }
        
        // Email validation and copy-paste prevention
        function validateEmails() {
            const email = document.getElementById('email').value;
            const emailConfirm = document.getElementById('emailConfirm').value;
            
            if (email !== emailConfirm) {
                alert('Email addresses do not match. Please re-enter your email correctly.');
                // Clear the confirm email field
                document.getElementById('emailConfirm').value = '';
                document.getElementById('emailConfirm').focus();
                return false;
            }
            return true;
        }
        
        // Update DOB from manual inputs
        function updateDOBFromManual() {
            const day = document.getElementById('dobDay').value;
            const month = document.getElementById('dobMonth').value;
            const year = document.getElementById('dobYear').value;
            const dobInput = document.getElementById('dob');
            
            console.log('Manual DOB Input:', { day, month, year });
            
            if (day && month && year) {
                // Validate day based on month
                const daysInMonth = new Date(year, month, 0).getDate();
                if (day > daysInMonth) {
                    alert(`Invalid day for the selected month. Maximum days: ${daysInMonth}`);
                    document.getElementById('dobDay').value = '';
                    return;
                }
                
                // Create date string in YYYY-MM-DD format
                const dobString = `${year}-${month}-${day.padStart(2, '0')}`;
                dobInput.value = dobString;
                
                console.log('Updated date input with:', dobString);
                
                // Validate the age
                validateAge();
            }
        }
        
        // Age validation function
        function validateAge() {
            const dobInput = document.getElementById('dob');
            const dob = new Date(dobInput.value);
            const today = new Date();
            const age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            
            console.log('Age Validation:', {
                dob: dobInput.value,
                dobDate: dob,
                today: today,
                calculatedAge: age,
                monthDiff: monthDiff
            });
            
            // Calculate exact age
            let exactAge = age;
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                exactAge--;
            }
            
            console.log('Exact Age:', exactAge);
            
            if (exactAge < 15) {
                console.log('Age validation failed: Under 15 years old');
                alert('You must be at least 15 years old to purchase tickets.');
                // Clear all manual inputs
                document.getElementById('dobDay').value = '';
                document.getElementById('dobMonth').value = '';
                document.getElementById('dobYear').value = '';
                dobInput.value = '';
                document.getElementById('dobDay').focus();
                return false;
            }
            
            console.log('Age validation passed:', exactAge, 'years old');
            return true;
        }
        
        // Toggle activity options based on participation choice
        function toggleActivityOptions() {
            const participationYes = document.getElementById('participationYes');
            const activityOptions = document.getElementById('activityOptions');
            
            // Check if user has VIP ticket
            const ticketInfo = JSON.parse(localStorage.getItem('ticketInfo') || '{}');
            
            if (participationYes.checked) {
                // Check if user has VIP ticket
                if (ticketInfo.type !== 'vip') {
                    // Show error message for Simple ticket holders
                    alert('Event participation is only available for VIP ticket holders. Please upgrade to VIP to participate in activities.');
                    participationYes.checked = false;
                    document.getElementById('participationNo').checked = true;
                    return;
                }
                
                activityOptions.style.display = 'block';
                // Reset selection limit when showing options
                limitActivitySelection();
                console.log('Activity options shown for VIP ticket holder');
            } else {
                activityOptions.style.display = 'none';
                // Clear all activity selections when hidden
                const checkboxes = activityOptions.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                    checkbox.disabled = false;
                });
                document.getElementById('activityDescription').value = '';
                updateActivitySelectionFeedback();
                console.log('Activity options hidden and cleared');
            }
        }
        
        // Limit activity selection to maximum 2 items
        function limitActivitySelection() {
            const checkboxes = document.querySelectorAll('input[name="activities"]');
            const checkedBoxes = document.querySelectorAll('input[name="activities"]:checked');
            
            if (checkedBoxes.length >= 2) {
                // Disable unchecked checkboxes
                checkboxes.forEach(checkbox => {
                    if (!checkbox.checked) {
                        checkbox.disabled = true;
                    }
                });
            } else {
                // Enable all checkboxes
                checkboxes.forEach(checkbox => {
                    checkbox.disabled = false;
                });
            }
            
            // Update visual feedback
            updateActivitySelectionFeedback();
        }
        
        // Update visual feedback for activity selection
        function updateActivitySelectionFeedback() {
            const checkedBoxes = document.querySelectorAll('input[name="activities"]:checked');
            const feedbackElement = document.getElementById('activityFeedback');
            
            if (checkedBoxes.length === 2) {
                feedbackElement.innerHTML = '<i class="fas fa-check-circle text-success me-1"></i>Maximum 2 activities selected';
                feedbackElement.className = 'text-success small';
            } else if (checkedBoxes.length === 1) {
                feedbackElement.innerHTML = '<i class="fas fa-info-circle text-info me-1"></i>You can select 1 more activity';
                feedbackElement.className = 'text-info small';
            } else {
                feedbackElement.innerHTML = '<i class="fas fa-info-circle text-muted me-1"></i>Select up to 2 activities';
                feedbackElement.className = 'text-muted small';
            }
        }
        
        
        // Prevent copy-paste on email confirm field
        document.addEventListener('DOMContentLoaded', function() {
            const emailConfirmField = document.getElementById('emailConfirm');
            
            // Prevent paste, copy, cut
            emailConfirmField.addEventListener('paste', function(e) {
                e.preventDefault();
                showCopyPasteWarning();
            });
            
            emailConfirmField.addEventListener('copy', function(e) {
                e.preventDefault();
                showCopyPasteWarning();
            });
            
            emailConfirmField.addEventListener('cut', function(e) {
                e.preventDefault();
                showCopyPasteWarning();
            });
            
            // Add visual feedback for typing
            emailConfirmField.addEventListener('input', function() {
                const email = document.getElementById('email').value;
                const emailConfirm = this.value;
                
                if (emailConfirm.length > 0) {
                    if (email === emailConfirm) {
                        this.style.borderColor = '#28a745';
                        this.style.backgroundColor = '#f8fff8';
                    } else {
                        this.style.borderColor = '#dc3545';
                        this.style.backgroundColor = '#fff8f8';
                    }
                } else {
                    this.style.borderColor = '#ddd';
                    this.style.backgroundColor = 'white';
                }
            });
            
            // Clear confirm field when main email changes
            document.getElementById('email').addEventListener('input', function() {
                document.getElementById('emailConfirm').value = '';
                document.getElementById('emailConfirm').style.borderColor = '#ddd';
                document.getElementById('emailConfirm').style.backgroundColor = 'white';
            });
        });
        
        function showCopyPasteWarning() {
            // Create warning message
            const warning = document.createElement('div');
            warning.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #dc3545;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 9999;
                font-weight: bold;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            warning.innerHTML = ' Copy-paste not allowed! Please type your email manually.';
            
            document.body.appendChild(warning);
            
            // Remove warning after 3 seconds
            setTimeout(() => {
                if (warning.parentNode) {
                    warning.parentNode.removeChild(warning);
                }
            }, 3000);
        }
        
        // Handle form submission
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedPaymentMethod) {
                alert('Please select a payment method');
                return;
            }
            
            if (!validateEmails()) {
                return;
            }
            
            if (!validateAge()) {
                return;
            }
            
            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fa fa-spinner fa-spin me-2"></i>Submitting...';
            submitBtn.disabled = true;
            submitBtn.classList.add('btn-loading');
            
            const formData = new FormData(this);
            
            // Add ticket info to form data
            formData.append('ticketInfo', JSON.stringify(ticketInfo));
            formData.append('paymentMethod', selectedPaymentMethod);
            
            // Submit to backend
            fetch('/submit_order', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                    if (data.success) {
                    showSuccessMessage(data.order_id, data.email_sent);
            } else {
                alert('Error: ' + data.message);
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                submitBtn.classList.remove('btn-loading');
            }
            })
        .catch(error => {
            alert('Error submitting order: ' + error);
            // Reset button
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
            submitBtn.classList.remove('btn-loading');
        });
        });
        
        function showSuccessMessage(orderId, emailSent) {
            // Get activity data - handle case where participation section is hidden
            let eventParticipation = 'no'; // Default to 'no'
            let activities = [];
            let activityDescription = '';
            
            const participationSection = document.getElementById('participationSection');
            if (participationSection && participationSection.style.display !== 'none') {
                const participationRadio = document.querySelector('input[name="eventParticipation"]:checked');
                if (participationRadio) {
                    eventParticipation = participationRadio.value;
                    
                    if (eventParticipation === 'yes') {
                        const activityCheckboxes = document.querySelectorAll('input[name="activities"]:checked');
                        activities = Array.from(activityCheckboxes).map(checkbox => checkbox.value);
                        activityDescription = document.getElementById('activityDescription').value;
                    }
                }
            }
            
            // Store order data for confirmation page
            const orderData = {
                personalInfo: {
                    fullName: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    eventParticipation: eventParticipation,
                    activities: activities,
                    activityDescription: activityDescription
                },
                ticketInfo: ticketInfo,
                paymentMethod: selectedPaymentMethod,
                orderId: orderId,
                emailSent: emailSent
            };
            
            // Store in localStorage for confirmation page
            localStorage.setItem('orderData', JSON.stringify(orderData));
            
            // Redirect to confirmation page
            window.location.href = `order-confirmation.html?orderId=${orderId}`;
        }
    </script>
    <!-- Javascript end-->

</body>

</html>

